const divInstall=document.getElementById("installContainer"),butInstall=document.getElementById("butInstall");if(window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),console.log("signal","beforeinstallprompt",e),window.deferredPrompt=e,divInstall.classList.toggle("hidden",!1)})),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js"),"http:"===window.location.protocol){const e=document.getElementById("requireHTTPS");e.querySelector("a").href=window.location.href.replace("http://","https://"),e.classList.remove("hidden")}var value1=0,value2=0,op=null;const DISPLAY=document.getElementById("display");DISPLAY.innerHTML="0",document.body.addEventListener("click",(()=>{DISPLAY.innerHTML.length<8?DISPLAY.style.fontSize="64px":DISPLAY.innerHTML.length>=8&&DISPLAY.innerHTML.length<16?DISPLAY.style.fontSize="32px":DISPLAY.innerHTML.length>=16&&DISPLAY.innerHTML.length<24?DISPLAY.style.fontSize="16px":DISPLAY.innerHTML.length>=24&&(alert("Display text length is out of bound."),DISPLAY.style.fontSize="64px",DISPLAY.innerHTML="0")}));const ZERO=document.getElementById("0"),ONE=document.getElementById("1"),TWO=document.getElementById("2"),THREE=document.getElementById("3"),FOUR=document.getElementById("4"),FIVE=document.getElementById("5"),SIX=document.getElementById("6"),SEVEN=document.getElementById("7"),EIGHT=document.getElementById("8"),NINE=document.getElementById("9");ZERO.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML?DISPLAY.innerHTML="0":DISPLAY.innerHTML+="0"})),ONE.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="1":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="1":"eq"==op&&(DISPLAY.innerHTML="1",op=null)})),TWO.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="2":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="2":"eq"==op&&(DISPLAY.innerHTML="2",op=null)})),THREE.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="3":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="3":"eq"==op&&(DISPLAY.innerHTML="3",op=null)})),FOUR.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="4":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="4":"eq"==op&&(DISPLAY.innerHTML="4",op=null)})),FIVE.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="5":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="5":"eq"==op&&(DISPLAY.innerHTML="5",op=null)})),SIX.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="6":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="6":"eq"==op&&(DISPLAY.innerHTML="6",op=null)})),SEVEN.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="7":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="7":"eq"==op&&(DISPLAY.innerHTML="7",op=null)})),EIGHT.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="8":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="8":"eq"==op&&(DISPLAY.innerHTML="8",op=null)})),NINE.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML="9":"0"!=DISPLAY.innerHTML&&"eq"!=op?DISPLAY.innerHTML+="9":"eq"==op&&(DISPLAY.innerHTML="9",op=null)}));const CLEAR_ALL=document.getElementById("clear-all"),PLUMIN=document.getElementById("plumin"),COMMA=document.getElementById("comma"),ADD=document.getElementById("add"),SUB=document.getElementById("sub"),MUL=document.getElementById("mul"),DIV=document.getElementById("div"),PERCENT=document.getElementById("percent"),EQ=document.getElementById("eq");CLEAR_ALL.addEventListener("click",(()=>{DISPLAY.innerHTML="0"})),PLUMIN.addEventListener("click",(()=>{DISPLAY.innerHTML>0&&!DISPLAY.innerHTML.includes("-")?DISPLAY.innerHTML="-"+DISPLAY.innerHTML:DISPLAY.innerHTML<0&&DISPLAY.innerHTML.includes("-")&&(DISPLAY.innerHTML=DISPLAY.innerHTML.replace("-",""))})),COMMA.addEventListener("click",(()=>{"0"==DISPLAY.innerHTML?DISPLAY.innerHTML="0.":DISPLAY.innerHTML.includes(".")||(DISPLAY.innerHTML+=".")})),ADD.addEventListener("click",(()=>{if(0==value1)value1=parseFloat(DISPLAY.innerHTML);else{let e=value1;switch(op){case"add":value1=e+parseFloat(DISPLAY.innerHTML);break;case"sub":value1=e-parseFloat(DISPLAY.innerHTML);break;case"mul":value1=e*parseFloat(DISPLAY.innerHTML);break;case"div":value1=e/parseFloat(DISPLAY.innerHTML)}}DISPLAY.innerHTML="0",op="add"})),SUB.addEventListener("click",(()=>{if(0==value1)value1=parseFloat(DISPLAY.innerHTML);else{let e=value1;switch(op){case"add":value1=e+parseFloat(DISPLAY.innerHTML);break;case"sub":value1=e-parseFloat(DISPLAY.innerHTML);break;case"mul":value1=e*parseFloat(DISPLAY.innerHTML);break;case"div":value1=e/parseFloat(DISPLAY.innerHTML)}}DISPLAY.innerHTML="0",op="sub"})),MUL.addEventListener("click",(()=>{if(0==value1)value1=parseFloat(DISPLAY.innerHTML);else{let e=value1;switch(op){case"add":value1=e+parseFloat(DISPLAY.innerHTML);break;case"sub":value1=e-parseFloat(DISPLAY.innerHTML);break;case"mul":value1=e*parseFloat(DISPLAY.innerHTML);break;case"div":value1=e/parseFloat(DISPLAY.innerHTML)}}DISPLAY.innerHTML="0",op="mul"})),DIV.addEventListener("click",(()=>{if(0==value1)value1=parseFloat(DISPLAY.innerHTML);else{let e=value1;switch(op){case"add":value1=e+parseFloat(DISPLAY.innerHTML);break;case"sub":value1=e-parseFloat(DISPLAY.innerHTML);break;case"mul":value1=e*parseFloat(DISPLAY.innerHTML);break;case"div":value1=e/parseFloat(DISPLAY.innerHTML)}}DISPLAY.innerHTML="0",op="div"})),PERCENT.addEventListener("click",(()=>{value1=parseFloat(DISPLAY.innerHTML),DISPLAY.innerHTML=(value1/100).toString()})),EQ.addEventListener("click",(()=>{switch(value2=parseFloat(DISPLAY.innerHTML),op){case"add":DISPLAY.innerHTML=value1+value2,value1=0,value2=0;break;case"sub":DISPLAY.innerHTML=value1-value2,value1=0,value2=0;break;case"mul":DISPLAY.innerHTML=value1*value2,value1=0,value2=0;break;case"div":DISPLAY.innerHTML=value1/value2,value1=0,value2=0}op="eq"}));const CACHE_NAME="offline",OFFLINE_URL="offline.html";self.addEventListener("install",(function(e){console.log("[ServiceWorker] Install"),e.waitUntil((async()=>{const e=await caches.open("offline");await e.add(new Request(OFFLINE_URL,{cache:"reload"}))})()),self.skipWaiting()})),self.addEventListener("activate",(e=>{console.log("[ServiceWorker] Activate"),e.waitUntil((async()=>{"navigationPreload"in self.registration&&await self.registration.navigationPreload.enable()})()),self.clients.claim()})),self.addEventListener("fetch",(function(e){"navigate"===e.request.mode&&e.respondWith((async()=>{try{const n=await e.preloadResponse;if(n)return n;return await fetch(e.request)}catch(e){console.log("[Service Worker] Fetch failed; returning offline page instead.",e);const n=await caches.open("offline");return await n.match(OFFLINE_URL)}})())}));